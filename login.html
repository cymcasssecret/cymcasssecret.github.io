<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
            import { getAuth, GoogleAuthProvider, signInWithRedirect, getRedirectResult, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";

            const firebaseConfig = {
                //god damn putting api keys in plain js is stupid asf
                apiKey: "AIzaSyB0NJfpfMDWjd77NZ8xsOM37BTuAky4czU",
                authDomain: "cymcasssecret-206b4.firebaseapp.com",
                projectId: "cymcasssecret-206b4",
                storageBucket: "cymcasssecret-206b4.firebasestorage.app",
                messagingSenderId: "75124733607",
                appId: "1:75124733607:web:72b3e10b63be4e15b2cd82"
            };
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const provider = new GoogleAuthProvider();

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    console.log('User is already signed in:', user);
                    window.location.href = 'home.html';
                } else {
                    signInWithRedirect(auth, provider);
                }
            });

            getRedirectResult(auth)
                .then((result) => {
                    if (result) {
                        console.log('User signed in:', result.user);
                        window.location.href = 'home.html';
                    }
                })
                .catch((error) => {
                    console.error('Error during login:', error);
            });
          </script>
    </body>
</html>
